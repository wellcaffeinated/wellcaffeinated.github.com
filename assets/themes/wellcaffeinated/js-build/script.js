(function(e,t,n){function r(e){for(var n=0,r=arguments.length;n<r;n++){var i=arguments[n],s=t(i);if(s.scrollTop()>0)return i;s.scrollTop(1);var o=s.scrollTop()>0;s.scrollTop(0);if(o)return i}return e[e.length-1]}t(function(){function i(){var e=t("#main article .content").innerWidth();n.attr("width",e),n.attr("height",e*3/4)}t("#main").on({mouseenter:function(e){var n=t(this);n.addClass("on").stop().animate({width:t("#container").innerWidth()-2*n.offset().left},300)},mouseleave:function(e){var n=t(this);n.removeClass("on").stop().animate({width:n.parent().innerWidth()},300,function(){n.css("width","auto")})}},".geshi"),t("#sidebar").on({click:function(e){e.preventDefault(),t(r("html","body")).animate({scrollTop:0},400)}},".backToTop a"),e.iScroll?t("#main .geshi").each(function(){new iScroll(this,{hScroll:!0,vScroll:!0,bounce:!0,hScrollbar:!1,vScrollbar:!1})}):Modernizr.touch&&t("pre code").css("white-space","normal"),t(".youtube").each(function(){var e=t(this),n=e.attr("data-src");n&&n.length&&e.append('<iframe src="'+n+'" frameborder="0" allowfullscreen></iframe>')});var n=t(".youtube iframe");i(),t(e).on("resize",i),t("img[src=math]").each(function(){var e=t(this),n=e.attr("alt");e.attr("src","http://www.forkosh.com/mathtex.cgi?"+n),e.attr("title",n)}),Modernizr.mq("only screen and (max-width: 767px)")&&Modernizr.localstorage&&(localStorage.wellcaff_visited&&localStorage.wellcaff_visited.length&&parseInt(localStorage.wellcaff_visited)>(new Date).getTime()?setTimeout(function(){t("body").animate({scrollTop:t("#container > .outer").offset().top},400)},500):localStorage.wellcaff_visited=""+((new Date).getTime()+864e5))})})(this,jQuery);